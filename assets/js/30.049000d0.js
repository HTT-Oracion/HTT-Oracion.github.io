(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{550:function(s,a,e){"use strict";e.r(a);var n=e(5),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql"}},[s._v("#")]),s._v(" MySQL")]),s._v(" "),e("h2",{attrs:{id:"_1-简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-简介"}},[s._v("#")]),s._v(" 1. 简介")]),s._v(" "),e("p",[s._v("MySQL是DBMS，MySQL是一个"),e("strong",[s._v("关系型数据库管理系统")]),s._v("，使用的是SQL语句")]),s._v(" "),e("p",[s._v("SQL语句：用于访问数据库最常用的标准化语言。")]),s._v(" "),e("p",[s._v("MySQL 前身： 瑞典MySQL AB公司， 现： Oracle公司。")]),s._v(" "),e("p",[s._v("有点： 体积小，速度快，成本低，开源。")]),s._v(" "),e("h2",{attrs:{id:"_2-库-表的操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-库-表的操作"}},[s._v("#")]),s._v(" 2. 库，表的操作")]),s._v(" "),e("h2",{attrs:{id:"创建数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建数据库"}},[s._v("#")]),s._v(" 创建数据库")]),s._v(" "),e("p",[s._v("先要连接数据库，cmd：")]),s._v(" "),e("p",[s._v("在 C:\\Program Files\\MySQL\\mysql-8.0.22-winx64\\bin 目录下")]),s._v(" "),e("div",{staticClass:"language-powershell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[s._v("mysql "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("u root "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("输入密码连接数据库；")]),s._v(" "),e("p",[s._v("创建数据库：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE DATABASE NEWDATABASE;\n//使用数据库\nUSE NEWDATABASE;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("blockquote",[e("p",[s._v("MySQL 语句一定要 ；  结尾！")])]),s._v(" "),e("h3",{attrs:{id:"导入现有数据库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导入现有数据库"}},[s._v("#")]),s._v(" 导入现有数据库")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE DATABASE IF NOT EXISTS yiibaidb;\nuse yiibaidb;\nsource d:/yiibaidb.sql;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"表-约束条件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#表-约束条件"}},[s._v("#")]),s._v(" 表&约束条件")]),s._v(" "),e("p",[s._v("创建 create")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create table if not exists t_student(\n   no int,\n   name varchar(32),\n   sex  char(1),\n   age  int(3),\n   email varchar(255)\n);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("create 带约束条件")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("非空约束 not null\n唯一性约束 unique\n主键约束   primary key\n外键约束   foreign key\n检查约束   check（mysql不支持，oracle支持）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[s._v("not null")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> create table if not exists t_vip (\n    -> id int,\n    -> username varchar(255) not null);\n\nmysql> insert into t_vip(id,username) values (1,'zhangsan');\nQuery OK, 1 row affected (0.01 sec)\n#username字段非空约束\nmysql> insert into t_vip(id) values (2);\n1364 - Field 'username' doesn't have a default value\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])]),e("ul",[e("li",[s._v("unique")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> create table if not exists t_mvp(\n    -> id int,\n    -> username varchar(25) not null unique);\n#not null 和 unique 一起使用时，该字段会成为主键(mysql中)    \n\nmysql> insert into t_mvp values(1,'zhangsan'); \nQuery OK, 1 row affected (0.00 sec)\n\nmysql> insert into t_mvp values(2,'zhangsan'); \n1062 - Duplicate entry 'zhangsan' for key 't_mvp.username'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("两个字段联合起来具有唯一性")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create table if not exists t_vip(\n       id int,\n       username varchar(255),\n       email varchar(25),\n       unique(username,email) #表级约束 not null 只能是列级约束\n       );\nmysql> insert into t_vip values(1,'zs','za@123.com');\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> insert into t_vip values(1,'zs','za@12.com');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> select * from t_vip;\n+----+----------+------------+\n| id | username | email      |\n+----+----------+------------+\n|  1 | zs       | za@123.com |\n|  1 | zs       | za@12.com  |\n+----+----------+------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("ul",[e("li",[s._v("primary key")])]),s._v(" "),e("p",[s._v("每个表都应该有主键， 加了主键的字段叫主键字段， 值为主键值。")]),s._v(" "),e("p",[s._v("主键的特征： 主键值 not null + unique")]),s._v(" "),e("blockquote",[e("p",[s._v("主键用定长的数字，一般不建议用varchar")])]),s._v(" "),e("p",[s._v("可以通过表级约束添加")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" #单一主键\n .. id int primary key,\ncreate table if not exists t_vip(\n       id int,\n       username varchar(255),\n       email varchar(25),\n       unique(username,email),\n       primary key(id)\n );\n#复合主键 （联合起来）\nmysql> create table if not exists t_vip(\n       id int,\n       username varchar(255),\n       email varchar(25),\n       primary key(id,username)\n );\nQuery OK, 0 rows affected (0.03 sec)\nmysql> insert into t_vip values (1,'lisi','111@11.com');\nQuery OK, 1 row affected (0.01 sec)\n\nmysql> insert into t_vip values (1,'zs','222@11.com');\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> insert into t_vip values (1,'lisi','333@11.com');\n1062 - Duplicate entry '1-lisi' for key 't_vip.PRIMARY'\nmysql> \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("ul",[e("li",[s._v("foreign key 外键约束")])]),s._v(" "),e("p",[s._v("外键约束可以控制某一字段的值，使用外键约束，则有表与表有父子关系")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DROP TABLE\nIF\n\tEXISTS t_student;\nDROP TABLE\nIF\n\tEXISTS t_class;\nCREATE TABLE t_class ( \n    classNumber INT PRIMARY KEY, \n    className VARCHAR ( 255 ) \n);\ninsert into t_class values(100,'一班'),(101,'二班');\nCREATE TABLE t_student ( \n    id INT PRIMARY KEY auto_increment, \n    stuName VARCHAR ( 255 ), \n    cno INT, \n    #引用 t_class 的 classNumber，因此 cno 的值只能是 100&101, 此时父表为t_class\n    FOREIGN KEY ( cno ) REFERENCES t_class ( classNumber ) \n);\n\ninsert into t_student(stuName,cno) values ('jack',101),\n('annie',101),('doro',100),('lisi',100);\n#插入 cno=102 因为有外键约束所以失败。\ninsert into t_student(stuName,cno) values ('jack',102);\n> 1452 - Cannot add or update a child row: a foreign key constraint fails (`bjpowernode`.`t_student`, CONSTRAINT `t_student_ibfk_1` FOREIGN KEY (`cno`) REFERENCES `t_class` (`classNumber`))\nSELECT * FROM t_student;\nSELECT * FROM t_class;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("blockquote",[e("p",[s._v("外键值可以为NULL，但引用的字段必须具有唯一性。")])]),s._v(" "),e("p",[s._v("删除 delete")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("drop table if exists t_student;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("alert")]),s._v(" "),e("h2",{attrs:{id:"_3-select-查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-select-查询"}},[s._v("#")]),s._v(" 3.SELECT 查询")]),s._v(" "),e("p",[s._v("基本语句：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT \n    column_1, column_2, ...\nFROM\n    table_1\n[INNER | LEFT |RIGHT] JOIN table_2 ON conditions\nWHERE\n    conditions\nGROUP BY column_1\nHAVING group_conditions\nORDER BY column_1\nLIMIT offset, length;\n\nSELECT语句由以下列表中所述的几个子句组成：\n\nSELECT之后是逗号分隔列或星号(*)的列表，表示要返回所有列。\nFROM指定要查询数据的表或视图。\nJOIN根据某些连接条件从其他表中获取数据。\nWHERE过滤结果集中的行。\nGROUP BY将一组行组合成小分组，并对每个小分组应用聚合函数。\nHAVING过滤器基于GROUP BY子句定义的小分组。\nORDER BY指定用于排序的列的列表。\nLIMIT限制返回行的数量。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("p",[s._v("查询所有列：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select * from `offices`;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查询指定列")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select phone,name from `offices`;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"别名"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#别名"}},[s._v("#")]),s._v(" "),e("strong",[s._v("别名")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//使用AS\nSELECT\n\temail\n\tAS\n\t邮箱\n\tFROM\nemployees;\n//使用空格\nSELECT \n\temail 邮箱\n\tFROM\nemployees;\n\t\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("blockquote",[e("p",[s._v("别名如果带关键字， 则用要加“ ”")])]),s._v(" "),e("h3",{attrs:{id:"去重"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#去重"}},[s._v("#")]),s._v(" 去重")]),s._v(" "),e("p",[s._v("去除重复的结果")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\tSELECT officeCode FROM employees;\n\t# 去重\n\tSELECT DISTINCT officeCode FROM employees;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#号"}},[s._v("#")]),s._v(" ‘+’ 号")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELCET  100+10;  110\nSELECT '123'+10; 133\nSELECT 'JOE'+10; 10\nSELECT  NULL+10; NULL\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"子查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#子查询"}},[s._v("#")]),s._v(" 子查询")]),s._v(" "),e("blockquote",[e("p",[s._v("select 语句中嵌套select 语句， 被嵌套的select语句被称为子查询。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT\n    ...(SELECT)\nFROM\n    ...(SELECET)\nWHERE\n    ...(SELECT);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("WHERE的子查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#查询大于最低工资的员工姓名和工资\n#执行时，先执行查询子句\nselect ename,sal from emp where (select min(sal) > 800);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("FROM 的子查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#查询员工的姓名和工资还有对应的工资等级\nselect t.*,s.grade \nfrom\n  (select job,avg(sal) as avgsal from emp group by job) t\njoin\n   salgrade s\non \n   t.avgsal between s.losal and s.hisal;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("SELECT的子查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select e.ename,e.deptno,(select d.dname from dept d where e.deptno = d.deptno)as dname from emp e;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"where"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#where"}},[s._v("#")]),s._v(" WHERE")]),s._v(" "),e("p",[s._v("where 允许根据指定的过滤表达式或条件来指定要选择的行。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('select lastname, firstname, jobtitle from employees where jobtitle = "Sales Rep";\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("多个过滤表达式或条件用AND 连接")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' select lastname, firstname, jobtitle \n from employees\n where jobtitle = "Sales Rep" AND officeCode = 1;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("支持以下")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//运算符\n=                等于\n<> , !=          不等于\n<,>              小于，大于\n<=,>=\n//逻辑表达式\n  and or not  \n//模糊查询\n  like\n  between and\n  in\n  is null\nBETWEEN X AND Y  在X和Y之间\nNOT BETWEEN X AND Y  X和Y之间以外的\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" select productCode, productName, buyPrice \n from products\n where buyPrice BETWEEN 90 AND 100;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("当使用"),e("code",[s._v("BETWEEN")]),s._v("运算符与日期类型值时，要获得最佳结果，应该使用类型转换将列或表达式的类型显式转换为"),e("strong",[s._v("DATE类型")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('mysql> SELECT orderNumber, requireddate, status FROM orders\n    -> WHERE requireddate BETWEEN CAST("2013-01-01" AS DATE) AND CAST("2013-    01-31" AS DATE);\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("LIKE运行符")])]),s._v(" "),e("p",[s._v("%：匹配字符串的0个或多个字符；")]),s._v(" "),e("p",[s._v("_ :   允许匹配任何单个字符;")]),s._v(" "),e("p",[s._v("%的使用示例：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 查询 firstName 以 a 开头 的员工信息\nSELECT employeeNumber, lastName, firstName FROM employees WHERE  firstName LIKE 'a%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 查询  lastName 以 on 结尾 的员工信息\nSELECT employeeNumber, lastName, firstName FROM employees WHERE  lastName LIKE '%on';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 查询 lastName 包含 on 的员工信息\nSELECT employeeNumber, lastName, firstName FROM employees WHERE  lastName LIKE '%on%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("_ 的使用实例：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 查询 firstName 以 T 开头 ，M 结尾的员工信息\nSELECT employeeNumber, lastName, firstName FROM employees WHERE  firstName LIKE 'T_M';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("NOT LIKE:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 查询 firstName 不以B字符开头的 员工信息\nSELECT employeeNumber, lastName, firstName FROM employees WHERE  firstName NOT LIKE 'b%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[e("strong",[s._v("ESCAPE 转义符")])]),s._v(" "),e("p",[s._v("如果要查询 包含 "),e("code",[s._v("_20")]),s._v(" 字符串的数据")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" SELECT productCode, productName FROM products WHERE productCode LIKE '%\\_20%';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("默认情况下， / 为转义符 ，也可以自定转义字符")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT productCode, productName FROM products WHERE productCode LIKE '%$_20%' ESCAPE '$';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("IN 运算符")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT officeCode, city, phone, country FROM offices WHERE country IN('USA','France');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("NOT IN")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" SELECT officeCode, city, phone, country FROM offices WHERE country IN('USA','France');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("IS NULL")]),s._v(" :  检查该值是否为NULL")]),s._v(" "),e("h3",{attrs:{id:"去重查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#去重查询"}},[s._v("#")]),s._v(" 去重查询")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT DISTINCT jobTitle FROM employees;\n#联合去重\nSELECT  DISTINCT jobTitle,officeCode FROM employees;\nSELECT COUNT(DISTINCT jobTitle) FROM employees;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"排序-order-by"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#排序-order-by"}},[s._v("#")]),s._v(" 排序  ORDER BY")]),s._v(" "),e("p",[s._v("按。。。排序默认为升序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT customerNumber \n FROM customers\n ORDER BY customerNumber;\t#按照customerNumber 排序 \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("降序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT customerNumber \n FROM customers\n ORDER BY customerNumber desc;\t#按照customerNumber 降序排序\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("指定 asc 为升序（可以不指定，默认为升序）， 指定desc 为降序；")]),s._v(" "),e("p",[s._v("多个字段排序")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELCET ename,sal\nFROM emp\nORDER BY\n     sal asc,ename asc;\n# 按薪资升序排列，遇到薪资一样时，再按名称升序排列\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("根据字段的位置排序（不常用）")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELCET ename,sal\nFROM emp\nORDER BY 2;\n#这里2代表第二列，即sal,按sal 排序\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"连接查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#连接查询"}},[s._v("#")]),s._v(" 连接查询")]),s._v(" "),e("p",[s._v("多张表联合查询")]),s._v(" "),e("p",[s._v("连接查询没有条件限制时，会发生笛卡儿积现象")]),s._v(" "),e("p",[s._v("表一有4行数据，表二有14行数据")]),s._v(" "),e("p",[s._v("查询结果为56行，这是因为连接时是表一的一行匹配表二的所有行（没有查询条件的情况下），匹配次数为56次")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT ename,dname FROM emp,dept;\n#4*14 = 56 rows\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("带有查询条件：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#匹配次数还是56次\nSELECT ename,dname FROM emp, dept WHERE emp.deptno = dept.deptno;\n#优化\nSELECT emp.ename,dept.dname FROM emp, dept WHERE emp.deptno = dept.deptno;\n#别名\nSELECT e.ename,d.dname FROM emp e, dept d WHERE e.deptno = d.deptno;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"内连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内连接"}},[s._v("#")]),s._v(" 内连接")]),s._v(" "),e("ol",[e("li",[s._v("等值连接")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT e.ename,d.dname FROM emp e, dept d WHERE e.deptno = d.deptno; #SQL92\nSELECT e.ename,d.dname FROM emp e INNER JOIN dept d ON e.deptno = d.deptno; #SQL99\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("非等值连接")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 查询 员工的姓名，薪资 和 薪资级别\nSELECT \ne.ename, e.sal , s.grade\nFROM\nON\ne.sal BETWEEN s.losal AND s.hisal;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ol",{attrs:{start:"3"}},[e("li",[s._v("自连接")])]),s._v(" "),e("p",[s._v("一张表充当两张表，自己连接自己")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('SELECT a.ename as "员工名",  b.ename as "领导名" \nFROM emp a JOIN emp b\nON  a.mgr = b.empno;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"外连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#外连接"}},[s._v("#")]),s._v(" 外连接")]),s._v(" "),e("blockquote",[e("p",[s._v("外连接中，两张表产生了主次关系，如果是右连接， 则右边的表为主表，主要是为了将主表的数据全部查询出来，携带着关联查询左边的表。左连接反之。")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELET a.ename,b.dname\nFROM \n    emp a \nLEFT (OUTER)JOIN #OUTER可以省略\n    dept b\nON  a.deptno = b.deptno\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("多表连接")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT a.xxx,b.xxx,c.xxx,\nFROM a\nJOIN b\nON  ...\nJOIN C\nON  ...;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"union-合并查询结果集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#union-合并查询结果集"}},[s._v("#")]),s._v(" UNION 合并查询结果集")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select ename,job from emp where job in('MANAGER','SALESMAN');\n#等价于\nselect ename,job from emp where job = 'MANAGER' union select ename,job from emp where job = 'SALESMAN';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("blockquote",[e("p",[s._v("union效率更高， 多表连接时，会有卡儿积现象 如t1 10  t2 10 t3 10  则会匹配1000次")]),s._v(" "),e("p",[s._v("使用union")]),s._v(" "),e("p",[s._v("先  ： a连接b => 结果x，匹配100次")]),s._v(" "),e("p",[s._v("a连接c => 结果y, 匹配100次 ，最后拼接 ，匹配次数只需要200次")])]),s._v(" "),e("p",[s._v("注意点：")]),s._v(" "),e("ol",[e("li",[s._v("UNION进行合并时，两个集的列数要一致。")]),s._v(" "),e("li",[s._v("相同列的数据类型要一致（Oracle 会报错）")])]),s._v(" "),e("h3",{attrs:{id:"limit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#limit"}},[s._v("#")]),s._v(" LIMIT")]),s._v(" "),e("p",[s._v("把查询结果集的一部分取出来，通常用于分页查询中。")]),s._v(" "),e("p",[s._v("LIMIT (startIndex), length;")]),s._v(" "),e("p",[s._v("在 order by 后执行。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#取前几位\nselect ename,sal from emp order by sal desc limit 5;\n#从X开始，取Y位\n#从索引5开始取5位，即取第6~10\nmysql> select ename,sal from emp order by sal desc limit 5,5;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"_4-insert-插入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-insert-插入"}},[s._v("#")]),s._v(" 4.INSERT 插入")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("INSERT INTO TABLE(column1,column2...) VALUES(value1,value2...);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("插入要符合表的结构")])]),s._v(" "),e("p",[s._v("新建一个测试数据库和表")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CREATE DATABASE testdb；\nUSE testdb;\nmysql> CREATE TABLE IF NOT EXISTS tasks(\n    -> task_id INT(11) AUTO_INCREMENT,\n    -> subject VARCHAR(45) DEFAULT NULL,\n    -> start_date DATE DEFAULT NULL,\n    -> end_date DATE DEFAULT NULL,\n    -> description VARCHAR(200) DEFAULT NULL,\n    -> PRIMARY KEY(task_id)\n    -> )ENGINE=InnoDB DEFAULT CHARSET=utf8;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("插入数据")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" INSERT INTO tasks(subject,start_date,end_date,description) values\n    -> ('MySQL INSERT','2020-12-11','2020-12-11','MySQL...');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("查询：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT * FROM tasks;\n\n+---------+--------------+------------+------------+-------------+\n| task_id | subject      | start_date | end_date   | description |\n+---------+--------------+------------+------------+-------------+\n|       1 | MySQL INSERT | 2020-12-11 | 2020-12-11 | MySQL...    |\n+---------+--------------+------------+------------+-------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("插入多行")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> INSERT INTO tasks(subject,start_date,end_date,description) values\n    -> ('任务1','2020-11-11','2020-11-11','task1'),\n    -> ('任务2','2020-11-11','2020-11-11','task2'),\n    -> ('任务3','2020-11-11','2020-11-11','task3');\n    \n+---------+--------------+------------+------------+-------------+\n| task_id | subject      | start_date | end_date   | description |\n+---------+--------------+------------+------------+-------------+\n|       1 | MySQL INSERT | 2020-12-11 | 2020-12-11 | MySQL...    |\n|       2 | 任务1        | 2020-11-11 | 2020-11-11 | task1       |\n|       3 | 任务2        | 2020-11-11 | 2020-11-11 | task2       |\n|       4 | 任务3        | 2020-11-11 | 2020-11-11 | task3       |\n+---------+--------------+------------+------------+-------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("如果插入的值和指定列一 一 对应，则可以省略 列列表")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("INSERT INTO table\nVALUES (value1,value2,...),\n       (value1,value2,...);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("具有SELECT 语句的 INSERT")]),s._v(" "),e("blockquote",[e("p",[s._v("可以使用SELECT返回的列的值来填充INSERT 语句的值 ，多用于复制表。")])]),s._v(" "),e("p",[s._v("首先通过LIKE复制 tasks 的结构")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" CREATE TABLE tasks_bak LIKE tasks;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("通过 INSERT 和SELECT 将tasks的数据插入 tasks_bak")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" INSERT INTO tasks_bak SELECT * FROM tasks;\n  SELECT * FROM tasks_bak;\n+---------+--------------+------------+------------+-------------+\n| task_id | subject      | start_date | end_date   | description |\n+---------+--------------+------------+------------+-------------+\n|       1 | MySQL INSERT | 2020-12-11 | 2020-12-11 | MySQL...    |\n|       2 | 任务1        | 2020-11-11 | 2020-11-11 | task1       |\n|       3 | 任务2        | 2020-11-11 | 2020-11-11 | task2       |\n|       4 | 任务3        | 2020-11-11 | 2020-11-11 | task3       |\n+---------+--------------+------------+------------+-------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[e("strong",[s._v("MySQL INSERT与ON DUPLICATE KEY UPDATE")])]),s._v(" "),e("blockquote",[e("p",[s._v("如果新行违反 主键 PRIMARY KEY 或 UNIQUE 约束， MySQL 会发生错误")])]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> INSERT INTO tasks(task_id,subject) values (4,'test');\nERROR 1062 (23000): Duplicate entry '4' for key 'tasks.PRIMARY'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("这是因为表中已经有 task_id 为4 的行，并且 task_id为主键。")]),s._v(" "),e("p",[s._v("使用 ON DUPLICATE KEY UPDATE ,MySQL 将插入新行，或使用新值更新原记录")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> INSERT INTO tasks(task_id,subject) values (4,'test') ON DUPLICATE KEY    UPDATE\n task_id = task_id + 1,\n subject = 'test';\nQuery OK, 2 rows affected (0.00 sec)\nmysql> SELECT * FROM tasks;\n+---------+--------------+------------+------------+-------------+\n| task_id | subject      | start_date | end_date   | description |\n+---------+--------------+------------+------------+-------------+\n|       1 | MySQL INSERT | 2020-12-11 | 2020-12-11 | MySQL...    |\n|       2 | 任务1        | 2020-11-11 | 2020-11-11 | task1       |\n|       3 | 任务2        | 2020-11-11 | 2020-11-11 | task2       |\n|       5 | test         | 2020-11-11 | 2020-11-11 | task3       |\n+---------+--------------+------------+------------+-------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h2",{attrs:{id:"_5-update-更新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-update-更新"}},[s._v("#")]),s._v(" 5.UPDATE 更新")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(' SELECT firstname, lastname, email FROM employees WHERE employeeNUMBER = 1056;\n+-----------+-----------+----------------------+\n| firstname | lastname  | email                |\n+-----------+-----------+----------------------+\n| Mary      | Patterson | mpatterso@yiibai.com |\n+-----------+-----------+----------------------+\nmysql> UPDATE employees SET email = "mary.new@yiibai.com" WHERE employeeNumber = 1056;\nmysql> SELECT firstname, lastname, email FROM employees WHERE employeeNUMBER = 1056;\n+-----------+-----------+---------------------+\n| firstname | lastname  | email               |\n+-----------+-----------+---------------------+\n| Mary      | Patterson | mary.new@yiibai.com |\n+-----------+-----------+---------------------+\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("p",[s._v("更新多列：")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('mysql> UPDATE employees SET email="new@mail.com", lastname="joery" WHERE employeeNumber = 1056;\nmysql> SELECT firstname, lastname, email FROM employees WHERE employeeNUMBER = 1056;\n+-----------+----------+--------------+\n| firstname | lastname | email        |\n+-----------+----------+--------------+\n| Mary      | joery    | new@mail.com |\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("搭配LIMIT")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('mysql> UPDATE customers SET\n    -> salesRepEmployeeNumber = (SELECT\n    -> employeeNumber FROM employees WHERE\n    -> jobtitle = "Sales Rep" LIMIT 1)\n    -> WHERE salesRepEmployeeNumber IS NULL;\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"_6-delete-删除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-delete-删除"}},[s._v("#")]),s._v(" 6.DELETE 删除")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE FROM table_name\nWHERE condition;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("DELETE 会返回删除的行数。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE employees WHERE officeCode = 4;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("DELETE 搭配 LIMIT 使用")]),s._v(" "),e("p",[s._v("LIMIT 限制删除的数量，应始终用ORDER BY子句")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("//删除 按客户名称按字母排序客户，并删除前10个客户\nDELETE FROM customers ORDER BY customerNumber LIMIT 10;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("DELETE 里使用 INNER JOIN")]),s._v(" "),e("p",[s._v("删除T1,T2里 满足 T1.KEY = T2.KEY 的数据， 且在WHERE 的条件下；")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE T1, T2 \nFROM T1 INNER JOIN T2 \n     ON T1.KEY = T2.KEY\nWHERE condition;  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("DELETE t1,t2\nFROM t1 INNER JOINT T2\n     ON t1.id = t2.ref\nWHERE t1.id = 1;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("delete删除时，只删除数据，表的结构还在，数据在硬盘上的空间不会释放，并且可以回滚，将删除的数据返回。效率低。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> start transaction;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> delete from dept_bak;\nQuery OK, 8 rows affected (0.00 sec)\n\nmysql> select * from dept_bak;\nEmpty set\n\nmysql> rollback;\nQuery OK, 0 rows affected (0.00 sec)\n\nmysql> select * from dept_bak;\n+--------+------------+----------+\n| DEPTNO | DNAME      | LOC      |\n+--------+------------+----------+\n|     10 | ACCOUNTING | NEW YORK |\n|     20 | RESEARCH   | DALLAS   |\n|     30 | SALES      | CHICAGO  |\n|     40 | OPERATIONS | BOSTON   |\n|     10 | ACCOUNTING | NEW YORK |\n|     20 | RESEARCH   | DALLAS   |\n|     30 | SALES      | CHICAGO  |\n|     40 | OPERATIONS | BOSTON   |\n+--------+------------+----------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br")])]),e("p",[e("strong",[s._v("truncate 删除")])]),s._v(" "),e("p",[s._v("物理删除，效率高，不支持回滚，快速。")]),s._v(" "),e("p",[s._v("删除的是表的数据，表还在。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("truncate table dept_bak;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("drop table; 删除表")]),s._v(" "),e("p",[s._v("drop删除的是表，数据还在")]),s._v(" "),e("h2",{attrs:{id:"_7-数据处理函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-数据处理函数"}},[s._v("#")]),s._v(" 7.数据处理函数")]),s._v(" "),e("p",[s._v("数据处理函数又称单行处理函数，特点是一个输入对应一个输出。")]),s._v(" "),e("p",[s._v("case...when..then...when...then..end")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#当员工职位是 MANAGER时，工资上调 10%，为SALEMEN时，上调50%\nSELECT\n  name,\n  job,\n  sal as oldsal,\n  (case job when 'MANAGER' then sal*1.1 when 'SALEMEN' then sal*1.5 else sal end) as newsal\nFROM\n  emp;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("lower 转换成 小写")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT LOWER(customerName) AS customerName FROM customers;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("upper 转换成大写")]),s._v(" "),e("p",[s._v("substr 截取字符串")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT SUBSTR(name,1,1) FROM student; #从1开始截取 1 位\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#首字母大写\nSELECT \nCONCAT(UPPER(SUBSTR(customerName,1,1)), SUBSTR(customerName,2,LENGTH(customerName)- 1))\nAS \nresult \nFROM \ncustomers;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("concact 拼接")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("CONCACT(str1,str2)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("length 取长度")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("LENGTH(NAME)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("trim 去空格")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#去除前后空格\nTRIM(NAME)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("str_to_date 将字符串转换成日期")]),s._v(" "),e("p",[s._v("date_format 格式化日期")]),s._v(" "),e("p",[s._v("format 格式千分位")]),s._v(" "),e("p",[s._v("round 四舍五入")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ROUND(number)\nSELECT ROUND(5.6);  6\nSELECT ROUND(5.6789, 0 ) 6， 0代表保留的小数位数\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("rand() 生成随机数")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("RAND();\n#取100以内的随机数\nSELECT ROUND(RAND()*100,0)  AS  num FROM  customers;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("ifnull  可以将null 转换成一个具体值")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 如果查询到的 sal 为NULL， 把它当做0来处理。\nIFNULL(sal,0);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"_8-分组函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_8-分组函数"}},[s._v("#")]),s._v(" 8. 分组函数")]),s._v(" "),e("p",[s._v("又称多行处理函数，输入多行，输出一行。")]),s._v(" "),e("p",[s._v("min,max,sum,count（计数）,avg（平均值）")]),s._v(" "),e("p",[s._v("必须先分组，如果没有分组，默认该表为一组。")]),s._v(" "),e("blockquote",[e("p",[s._v("分组函数遇到NULL 时，会忽略NULL，不计入。")]),s._v(" "),e("p",[s._v("count(*) 统计所有行数（因为所有都是NULL的一行是不存在的） ，count(name) 统计不包括NULL的")]),s._v(" "),e("p",[s._v("分组函数不能够直接使用在where子句中。")]),s._v(" "),e("p",[s._v("所有的 分组函数可以组合起来一起使用。")])]),s._v(" "),e("h2",{attrs:{id:"_9-分组查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-分组查询"}},[s._v("#")]),s._v(" 9.分组查询")]),s._v(" "),e("p",[s._v("group by")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("SELECT ...\nFROM   ...\nWHERE  ...\nGROUP BY...\nORDER BY...\n# 执行顺序\nFROM, WHERE, GROUP BY, SELECT, ORDER BY\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("为什么WHERE里不能直接使用分组函数？")]),s._v(" "),e("p",[s._v("因为 WHERE 的执行顺序在GROUP前，未分组，无法使用分组函数。")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#按照部门分组，求每一组的最大值\nSELECT deptno,max(sal) FROM emp GROUP BY deptno;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#按照部门分组，求每一组不同值位的最大工资\nSELECT deptno,job, max(sal) FROM emp GROUP BY deptno,job; \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#查询每个部门的最大工资，查询结果要求工资大于3000\n#方法1  having\n# having 必须搭配 group by 使用\n# 执行效率低，因为是先查询 后 筛选\nSELECT deptno,max(sal) FROM emp GROUP BY deptno having  max(sal) > 3000;\n# 方法2 先用where 过滤，再查询\nSELECT deptno,max(sal) WHERE sal> 3000 FROM emp GROUP BY deptno;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("blockquote",[e("p",[s._v("能使用 where 优先考虑 使用where。")])]),s._v(" "),e("h2",{attrs:{id:"_10-遇到各种报错的解决"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_10-遇到各种报错的解决"}},[s._v("#")]),s._v(" 10.遇到各种报错的解决")]),s._v(" "),e("ul",[e("li",[s._v("1451-Cannot delete or update a parent row: a foreign key constraint fails")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("常发生在删除时，因为此表跟其他表有关联，解决：\nSET foreign_key_checks = 0;  // 先设置外键约束检查关闭\n删除或其他语句。。。\nSET foreign_key_checks = 1; // 开启外键约束检查，以保持表结构完整性\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"_11-存储引擎"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_11-存储引擎"}},[s._v("#")]),s._v(" 11.存储引擎")]),s._v(" "),e("p",[s._v("存储引擎指定了该表的数据存取方式。")]),s._v(" "),e("p",[s._v("mysql的默认存储引擎是 InnoDB, 字符集默认为 utf8;")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v(" #查看\n show create table t_student;\n #在创建的时候设定\n create table t_table(\n       id int primary key auto_increment,\n       username varchar(255)\n) engine=InnoDB default charset=utf8;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("mysql支持的存储引擎：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 8.0.22\nshow engines;\n# 5.xx\nshow engines \\G;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h2",{attrs:{id:"_12-事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-事务"}},[s._v("#")]),s._v(" 12.事务")]),s._v(" "),e("p",[s._v("事务就是一个完整的业务逻辑。 是一个最小的工作单元，不可再分。")]),s._v(" "),e("p",[s._v("如 从A账户转账到B账户：")]),s._v(" "),e("p",[s._v("​     将A账户-10000，将B账户+10000。")]),s._v(" "),e("p",[s._v("以上的操作要么同时成功，要么同时失败，才能保证转账的正确。")]),s._v(" "),e("p",[s._v("只有DML语句才跟事务有关，即对数据的操作")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("insert delete update\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"提交事务-commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提交事务-commit"}},[s._v("#")]),s._v(" 提交事务 commit")]),s._v(" "),e("p",[s._v("commit是事务的结束，并且是一种全部成功的结束。")]),s._v(" "),e("p",[s._v("mysql默认每次DML语句都会"),e("strong",[s._v("自动")]),s._v("commit")]),s._v(" "),e("h3",{attrs:{id:"取消自动commit"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#取消自动commit"}},[s._v("#")]),s._v(" 取消自动commit")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#先开启事务,关闭自动提交机制,就不会自动提交\nstart transaction;\ninsert...\ninsert...\ninsert...\nselect * from ...\n#此时回滚，前面的DML都会被撤销\nrollback; => empty\n\n\nstart transaction;\ninsert...\ninsert...\ninsert...\ncommit;\n#此时回滚，回到前面的提交点，此时DML已经提交完毕。\nrollback; => 3条数据\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("p",[s._v("回滚事务 rollback")]),s._v(" "),e("p",[s._v("将之前所有的DML操作全部撤销，每次rollback只能回滚到上次commit点。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("strong",[s._v("一、事务的基本要素（ACID）")])]),s._v(" "),e("p",[e("strong",[s._v("1、原子性（Atomicity）：事务开始后所有操作，要么全部做完，要么全部不做，不可能停滞在中间环节。事务执行过程中出错，会回滚到事务开始前的状态，所有的操作就像没有发生一样。也就是说事务是一个不可分割的整体，就像化学中学过的原子，是物质构成的基本单位。")])]),s._v(" "),e("p",[s._v("**2、一致性（Consistency）：事务开始前和结束后，数据库的完整性约束没有被破坏 。比如A向B转账，不可能A扣了钱，B却没收到。\n**")]),s._v(" "),e("p",[e("strong",[s._v("3、隔离性（Isolation）：同一时间，只允许一个事务请求同一数据，不同的事务之间彼此没有任何干扰。比如A正在从一张银行卡中取钱，在A取钱的过程结束前，B不能向这张卡转账。")])]),s._v(" "),e("p",[e("strong",[s._v("4、持久性（Durability）：事务完成后，事务对数据库的所有更新将被保存到数据库，不能回滚。")])]),s._v(" "),e("p",[e("strong",[s._v("二、事务的并发问题")])]),s._v(" "),e("p",[e("strong",[s._v("1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据")])]),s._v(" "),e("p",[e("strong",[s._v("2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。")])]),s._v(" "),e("p",[e("strong",[s._v("3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。")])]),s._v(" "),e("p",[e("strong",[s._v("小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表")])]),s._v(" "),e("h2",{attrs:{id:"事务隔离级别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#事务隔离级别"}},[s._v("#")]),s._v(" 事务隔离级别")]),s._v(" "),e("p",[e("strong",[s._v("查询 ， 设置 事务隔离级别")]),s._v("（mysql8）")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("show variables like 'transaction_isolation';\n#设置\nset transaction_isolation='REPEATABLE-READ';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("strong",[s._v("read uncomitted")]),s._v("  读未提交")]),s._v(" "),e("p",[s._v("事务A能读取到事务B 未提交的数据，称为脏读现象。")]),s._v(" "),e("p",[e("strong",[s._v("read comitted")]),s._v("   读已提交")]),s._v(" "),e("p",[s._v("事务A只能读取到事务B 提交的数据， 解决了脏读现象，但不可重复读。")]),s._v(" "),e("p",[s._v("**repeatable read **  可重复读")]),s._v(" "),e("p",[s._v("事务A可重复读取原来的数据。")]),s._v(" "),e("p",[s._v("在事务A没有commit 的情况下， 即使事务B执行了DML语句甚至commit了，事务A读取到的数据仍然不变。 相当于事务A对原先的数据做了备份，然后一直读取的是这个备份数据。")]),s._v(" "),e("p",[s._v("缺点： 可能出现幻象，优点，解决了不可重复读。")]),s._v(" "),e("p",[e("strong",[s._v("serializable")]),s._v(" 序列化")]),s._v(" "),e("p",[s._v("事务是排队执行的。")]),s._v(" "),e("p",[s._v("如事务A和事务B中：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#先在事务A执行:\nstart transaction;\ninsert into emp values('zs');\n#再在事务B执行：\nstart transaction;\nselect * from emp;  #此时事务B不会执行，而是进入排队状态\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("出现上面的情况的原因是因为  序列化  中，事务的执行是排队执行的，在这个案例中，当事务A commit 后， 事务B 的 "),e("strong",[s._v("select * from emp")]),s._v(" 才会执行。")]),s._v(" "),e("h2",{attrs:{id:"_13-索引"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_13-索引"}},[s._v("#")]),s._v(" 13.索引")]),s._v(" "),e("p",[s._v("没有加索引的时候，进行查询，mysql进行的是全表扫描，效率低。在有索引的情况下，通过索引检索，定位到对应的物理编号，速度快。")]),s._v(" "),e("p",[s._v("索引的原理就是缩小扫描的方位，避免全表扫描。")]),s._v(" "),e("p",[e("strong",[s._v("在表中，主键字段、unique 的字段会自动添加一个索引对象。")])]),s._v(" "),e("p",[e("strong",[s._v("索引的分类")]),s._v("： 单一索引，联合索引，主键索引，唯一性索引")]),s._v(" "),e("h3",{attrs:{id:"索引的创建和删除"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#索引的创建和删除"}},[s._v("#")]),s._v(" 索引的创建和删除")]),s._v(" "),e("p",[s._v("什么时候考虑创建索引？")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("- 数据量庞大\n- 该字段经常出现在 where 后面\n- 该字段很少的 DML 操作\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("创建索引")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create index emp_ename_index on emp(ename);\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("删除")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("drop index emp_ename_index on emp;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看是否添加索引")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#\nexplain select * from emp where ename = 'KING';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("此时可以看到 type 为 ref，rows = 1；如果没有添加索引的情况下再执行上面的语句，则type为all，")]),s._v(" "),e("p",[s._v("rows=14。")]),s._v(" "),e("h3",{attrs:{id:"索引的失效"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#索引的失效"}},[s._v("#")]),s._v(" 索引的失效")]),s._v(" "),e("ol",[e("li",[s._v("给emp 的ename 添加了索引，如在执行SELECT 的时候，由于模糊匹配以'%'导致索引失效。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select * from emp where ename like '%T';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[e("p",[s._v("使用or的时候， 如果其中一个字段没有索引，索引也会失效")])]),s._v(" "),e("li",[e("p",[s._v("复合索引时，没有用左侧的列查询，索引会失效")])])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 给job sal 联合添加索引\ncreate index index_job_sal on emp(job,sal);\n// 使用左侧的列， 则索引有效 type=ref\nexplain select * from emp where job = 'MANAGER';\n// 没有使用左侧的列， 索引无效，type=all\nexplain select * from emp where sal = 800;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("索引列参加运算，索引失效。")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("select * from sal+1 = 800;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("在where中 索引列用了函数。")])]),s._v(" "),e("h2",{attrs:{id:"_14-视图"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_14-视图"}},[s._v("#")]),s._v(" 14.视图")]),s._v(" "),e("p",[s._v("创建视图")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("create view view_name as ... //后面必须是DQL语句\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> create view view_emp_dept as  \n       select e.ename,e.sal,d.dname \n    -> from emp e join dept d\n       where e.deptno = d.deptno;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("视图的作用，面向视图修改数据时，原表数据也会被修改。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("update view_emp_dept set dname = 'MANAGER' where ename = 'MILLER';\n//此时查询原表数据，原表数据也被修改\nselect * from dept;\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("视图存在的意义就是简化SQL的操作。")]),s._v(" "),e("h2",{attrs:{id:"_15-导入与导出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_15-导入与导出"}},[s._v("#")]),s._v(" 15.导入与导出")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#导出\nmysqldump bjpowernode>d:\\bjpowernode.sql -uroot -p\n\n#导入\ncreate database bjpowernode;\nuse bjpowernode;\nsource d:\\bjpowernode.sql\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"_16-数据库设计三范式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_16-数据库设计三范式"}},[s._v("#")]),s._v(" 16.数据库设计三范式")]),s._v(" "),e("p",[s._v("第一范式： 每个表有一个主键，每个字段原子性不可再分。")]),s._v(" "),e("p",[s._v("第二范式： 在第一范式的基础上，非主键字段完全依赖主键，不要产生部分依赖。")]),s._v(" "),e("p",[s._v("第三范式： 在第二范式的基础上，要求所有非主键字段直接依赖主键，不要产生传递主键。")]),s._v(" "),e("p",[s._v("多对多，三张表，关系表两个外键。")]),s._v(" "),e("p",[s._v("一对多，两张表，多的表加外键。")]),s._v(" "),e("p",[s._v("一对一，如果数据量太多，也要拆分，这时候在一张表上加外键和唯一。")]),s._v(" "),e("blockquote",[e("p",[s._v("数据库设计三范式是理论上的，为了满足客户需求，有时候会拿冗余换执行速度，")]),s._v(" "),e("p",[s._v("因为在sql中，表和表连接次数越多，效率越低。（笛卡儿积）")]),s._v(" "),e("p",[s._v("但是为了减少连接速度，这样做也合理，并且也可以降低编写SQL的难度。")])])])}),[],!1,null,null,null);a.default=t.exports}}]);